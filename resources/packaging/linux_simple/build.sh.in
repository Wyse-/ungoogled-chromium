#!/bin/bash

set -eux

# Simple build script for Linux

rm -rf out || true
mkdir out
mkdir $ungoog{build_output}
./ungoogled_packaging/scripts/apply_patch_series.py

# Set commands or paths to LLVM-provided tools here
export AR=llvm-ar
export NM=llvm-nm
export CC=clang
export CXX=clang++

./tools/gn/bootstrap/bootstrap.py -o $ungoog{build_output}/gn -s
./$ungoog{build_output}/gn gen $ungoog{build_output} --args='$ungoog{gn_args_string}' --fail-on-unused-args
ninja -C $ungoog{build_output} chrome chrome_sandbox chromedriver
